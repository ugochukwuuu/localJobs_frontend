import{r as i,u as y,a as k,c as b,b as s,d as x,e as V,w as d,v as D,f as _,n as L,g as u,h as R,i as T,j as U,s as p,k as $,o as c,R as z,l as A}from"./index-BzC9oz7R.js";/* empty css             */const B={class:"left-div"},C={class:"ld-wrapper"},E={class:"ef-input"},N={class:"password-div original-div d-flex align-items-center"},P=["type"],S={class:"login"},Y={__name:"Login",setup(I){const l=i(!1),r=y(),a=k({email:"",password:""}),g=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,m=()=>a.email.length==0?(r.warning("put in a valid email"),!1):a.password.length==0?(r.warning("put in a valid password"),!1):g.test(a.password)?!0:(r.warning("Your Password should have atleast one uppercase letter, one lowercase letter, one number and one special character"),!1),f=async o=>{o.preventDefault(),m()&&(console.log(a),v())},v=async()=>{console.log("loggin in..."),l.value=!0;let{data:o,error:e}=await p.auth.signInWithPassword({email:a.email,password:a.password});e&&(r.error(e.message),console.log("Error loggin in",e.message),l.value=!1);const t=o.session.access_token;localStorage.setItem("authToken",t),localStorage.setItem("userId",o.user.id),await w(o.user.id)},w=async o=>{let{data:e,error:t}=await p.from("users").select("role").eq("id",o).single();t&&console.log("Error getting user detaisl",t.message),localStorage.setItem("userRole",e.role),console.log(e.role),console.log(o),l.value=!1,$.replace(`/${e.role}/jobs/${o}`).then(()=>{location.reload()})},n=i(!1),h=()=>{n.value=!n.value};return(o,e)=>(c(),b("body",null,[s("main",null,[l.value?(c(),x(A,{key:0})):V("",!0),s("div",B,[s("div",C,[e[6]||(e[6]=s("h2",null,"Login to Your Accountâœ¨",-1)),s("form",{class:"email-form",onSubmit:f},[e[2]||(e[2]=s("div",{class:"line-text"},[s("span"),s("p"),s("span")],-1)),s("div",E,[d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.email=t),type:"email",placeholder:"godzilladagoat@email.com"},null,512),[[D,a.email]]),s("div",N,[d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.password=t),type:n.value?"text":"password",placeholder:"Password",ref:"password"},null,8,P),[[_,a.password]]),s("i",{class:L(["eye-toggle",n.value?"pi pi-eye":"pi pi-eye-slash"]),onClick:h},null,2)])]),e[3]||(e[3]=s("button",{type:"submit",class:"create"},"Login",-1))],32),s("p",S,[e[5]||(e[5]=u(" Don't have an Account? ")),R(U(z),{to:"/auth/register"},{default:T(()=>e[4]||(e[4]=[u("Register")])),_:1})])])]),e[7]||(e[7]=s("div",{class:"right-div"},null,-1))])]))}};export{Y as default};

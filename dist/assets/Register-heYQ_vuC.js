import{u as P,a as E,r as d,c as C,b as e,n as c,j as n,t as U,w as p,v,f as V,g as y,h as z,i as $,s as b,k as D,o as N,R as T}from"./index-BzC9oz7R.js";/* empty css             */const Z={class:"signupPage"},j={class:"left-div"},q={class:"ld-wrapper"},S={class:"role-selection-div"},B={class:"role-selection-options option"},F={class:"role-description"},Y={class:"full-name-field"},I={class:"ef-input"},J={class:"password-div original-div d-flex align-items-center"},L=["type"],M={class:"password-div d-flex align-items-center"},H=["type"],G={class:"login"},W={__name:"Register",setup(K){const r=P(),s=E({name:"",email:"",password:"",role:""}),m=d(""),f=d(""),h=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,_=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;let l=d("");const k=()=>s.name===""||s.name==null?(r.warning("First name is required"),!1):s.email===""||s.email==null?(r.warning("Email is required"),!1):s.password===""||s.password==null?(r.warning("Password is required"),!1):s.role==""||s.role==null?(r.warning("Please select your role"),!1):_.test(s.email)?h.test(s.password)?m.value.value!==f.value.value?(r.warning("Passwords do not match"),!1):!0:(r.warning("Your Password should have atleast one uppercase letter, one lowercase letter, one number and one special character"),!1):(r.warning("Email is invalid"),!1),x=async a=>{a.preventDefault(),k()&&(console.log(s),R())},R=async()=>{var w;console.log("registering...");const{data:a,error:o}=await b.auth.signUp({email:s.email,password:s.password});if(o){r.error("Registration error:",o.message),console.error("Registration error:",o.message);return}else{const u=(w=a.session)==null?void 0:w.access_token;console.log("Auth token:",u||"No token available (email confirmation required)"),u&&localStorage.setItem("authToken",u),localStorage.setItem("userRole",s.role)}const{error:t}=await b.from("users").insert([{id:a.user.id,email:a.user.email,password:s.password,name:s.name,role:s.role}]);t?(r.error("Error saving user to custom table:",t.message),console.error("Error saving user to custom table:",t.message)):(console.log("User data saved to custom table."),r.success("You have successfully registered"),D.replace(`/${s.role}/jobs/${a.user.id}`))},i=d(!1),A=()=>{console.log("working"),i.value=!i.value},g=a=>{s.role=a.target.id,l.value=a.target.id,console.log(l)};return(a,o)=>(N(),C("body",null,[e("main",Z,[e("div",j,[e("div",q,[o[7]||(o[7]=e("h2",null,"Create Your Account✨",-1)),e("form",{class:"email-form",onSubmit:x},[e("div",S,[o[3]||(o[3]=e("div",{class:"line-text"},[e("span"),e("p",null,"How do you want to use localJobs?"),e("span")],-1)),e("div",B,[e("button",{class:c(["role",n(l)&&n(l)==="freelancer"?"selected":"normal"]),type:"button",id:"freelancer",onClick:g},"Freelancer",2),e("button",{class:c(["role",n(l)&&n(l)!=="freelancer"?"selected":"normal"]),type:"button",id:"recruiter",onClick:g},"Recruiter",2)]),e("p",F,U(n(l)?n(l)==="freelancer"?`As a freelancer, you’ll browse and 
                            apply for local jobs that match your 
                            skills and interests`:`As a recruiter, you’ll post 
                            job opportunities and connect with talented 
                            freelancers nearby.`:""),1)]),e("div",Y,[p(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.name=t),type:"text",class:"user-name",id:"firstName",placeholder:"John"},null,512),[[v,s.name]])]),e("div",I,[p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.email=t),type:"email",placeholder:"Email"},null,512),[[v,s.email]]),e("div",J,[p(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>s.password=t),type:i.value?"text":"password",placeholder:"Password",ref_key:"password",ref:m},null,8,L),[[V,s.password]]),e("i",{class:c(["eye-toggle",i.value?"pi pi-eye":"pi pi-eye-slash"]),onClick:A},null,2)]),e("div",M,[e("input",{type:i.value?"text":"password",placeholder:"Repeat Password",ref_key:"confirmPassword",ref:f},null,8,H)])]),o[4]||(o[4]=e("button",{type:"submit",class:"create",id:"create-button"},"Create",-1))],32),e("p",G,[o[6]||(o[6]=y("Already have an Account? ")),z(n(T),{to:"/auth/login"},{default:$(()=>o[5]||(o[5]=[y("Login")])),_:1})])])]),o[8]||(o[8]=e("div",{class:"right-div"},null,-1))])]))}};export{W as default};
